server {
    listen 80 default_server;
    server_name _;

    location /node-metrics {
        proxy_pass http://localhost:9100/metrics;
    }

    # Templated configurations below this line (generated by templating) 
    {% if inventory_hostname in groups['web_servers'] %}
        location / {
            uwsgi_pass localhost:5000;
            include uwsgi_params;
        }
    {% endif %}

    {% if inventory_hostname in groups['prometheus_servers'] %}
        location /prometheus {
            proxy_pass http://localhost:9090;
        }      
    {% endif %}

}
